<!DOCTYPE html>
<html lang="en">
<head>
    <title>Example Payment Form</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body>

<form method="POST" action="#handler" id="adyen-encrypted-form">
    <fieldset>
        <legend>Card Details</legend>
        <div class="field">
            <label for="adyen-encrypted-form-number">
                <span>Card Number</span>
                <input type="text" id="adyen-encrypted-form-number" value="" size="20" autocomplete="off" data-encrypted-name="number" />
            </label>
            <span id="cardType"></span>
        </div>

        <div class="field">
            <label for="adyen-encrypted-form-cvc">
                <span>CVC</span>
                <input type="text" id="adyen-encrypted-form-cvc" value="" size="4" maxlength="4" autocomplete="off" data-encrypted-name="cvc" />
            </label>
        </div>

        <div class="field">
            <label for="adyen-encrypted-form-holder-name">
                <span>Card Holder Name</span>
                <input type="text" id="adyen-encrypted-form-holder-name" value="" size="20" autocomplete="off" data-encrypted-name="holderName" />
            </label>
        </div>

        <div class="field">
            <label for="adyen-encrypted-form-expiry-month">
                <span>Expiration (MM/YYYY)</span>
                <input type="text" value=""   id="adyen-encrypted-form-expiry-month" maxlength="2" size="2" autocomplete="off" data-encrypted-name="expiryMonth" /> /
            </label>
            <!-- Do not use two input elements inside a single label. This will cause focus issues on the seoncd and latter fields using the mouse in various browsers -->
            <input type="text" value="" id="adyen-encrypted-form-expiry-year" maxlength="4" size="4" autocomplete="off" data-encrypted-name="expiryYear" />
        </div>

        <input type="text" id="adyen-encrypted-form-key" value=""/>
        <input type="hidden" id="adyen-encrypted-form-expiry-generationtime" value="generate-this-server-side" data-encrypted-name="generationtime" />
        <input id="adyen-encrypted-submit" type="button" value="Submit" onclick="encryptExample();" />
        <input type="text" id="adyen-encrypted-output-value" value=""/>
    </fieldset>
</form>


<!-- How to use the Adyen encryption client-side JS library -->
<!-- N.B. Make sure the library is *NOT* loaded in the "head" of the HTML document -->
<script type="text/javascript" src="adyen.encrypt.nodom.min.js"></script>

<script type="text/javascript">

            var cseInstance;
            function getEncryptedFormData() {
                var postData = {};
                var cardData = {
                    number : document.getElementById('adyen-encrypted-form-number').value,
                    cvc : document.getElementById('adyen-encrypted-form-cvc').value,
                    holderName : document.getElementById('adyen-encrypted-form-holder-name').value,
                    expiryMonth : document.getElementById('adyen-encrypted-form-expiry-month').value,
                    expiryYear : document.getElementById('adyen-encrypted-form-expiry-year').value,
                    generationtime : new Date().toISOString(),
                };
                postData['adyen-encrypted-data'] = cseInstance.encrypt(cardData);
                return postData;
            }

            function encryptExample() {

                var key     =   document.getElementById('adyen-encrypted-form-key').value;
                var options = {};
                console.log(key);
                cseInstance = adyen.encrypt.createEncryption(key, options);
                var postData = getEncryptedFormData();
                document.getElementById('adyen-encrypted-output-value').value =  JSON.stringify(postData);
            }

        </script>
</body>
</html>